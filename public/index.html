<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philippine Arena Booking</title>
    <!-- Google Fonts: Nunito (rounded, modern, clean) -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <!-- Navigation Bar -->
   <header>
    <nav>
        <div class="logo-container">
            <img src="img/Philippine_Arena_Logo.svg" alt="Philippine Arena Logo" class="logo-img">
            <h1 class="logo-title">Book Arena</h1>
        </div>
        <button class="hamburger" id="hamburger" aria-label="Menu">&#9776;</button>
        <div class="nav-links" id="navLinks">
            <a href="#dashboard" class="nav-anchor" data-anchor="dashboard">Dashboard</a>
            <a href="#upcoming-events" class="nav-anchor" data-anchor="upcoming-events">Events</a>
            <a href="#seating" class="nav-anchor" data-anchor="seating">Seating & Prices</a>
            <a href="#about" class="nav-anchor" data-anchor="about">About</a>
            <a href="#contact" class="nav-anchor" data-anchor="contact">Contact</a>
            <a href="venue.html">Venue Rental</a>
        </div>
    </nav>
</header>
    <section id="dashboard" class="dashboard">
        <div id="dashboardContent">
            <strong class="dashboard-title">Experience Unforgettable Events</strong>
            <p>Book your tickets for upcoming events at the world's largest indoor arena</p>
        </div>
    </section>

    <div style="background: #e0e0e0; padding: 30px 0;">
        <h2 style="text-align: center; margin: 0; font-size: 2rem; font-weight: 800; color: #3b3b3b;">
            Upcoming Events
        </h2>
    </div>

        <section id="upcoming-events" class="upcoming-events">
       <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(270px, 1fr)); gap: 20px; margin-top: 20px;">
            <!-- SB19 Event Card -->
            <div class="event-card" style="position: relative; padding-bottom: 60px;">
                <div class="event-img-container">
                    <div style="position: relative; display: inline-block;">
                            <img src="img/489619983_1241347897358000_3465175647287396643_n.jpg" alt="SB19" class="event-img">
                        </a>
                    </div>
                </div>
                <h3>Concert: SB19</h3>
                <p>Date: May 31, 2025 - June 01, 2025</p>
                <p>Experience the electrifying energy of SB19's "Simula at W<span class="booking-unavailable-label" style="display: none; position: absolute; top: 50%; left: 105%; z-index: 10; background: rgba(59,106,226,0.95); color: #fff; padding: 6px 16px; border-radius: 6px; font-size: 15px; white-space: nowrap; pointer-events: none; min-width: 220px; text-align: left;"></span>akas World Tour"—a global musical journey that marks both a culmination and a new beginning for the Filipino pop sensation!</p>
                   <button class="event-btn" style="background: #ccc; color: #888; cursor: not-allowed;" disabled>Book Now</button>
                  <span class="booking-unavailable-label" style="display: none; position: absolute; top: 50%; left: 105%; z-index: 10; background: rgba(59,106,226,0.95); color: #fff; padding: 6px 16px; border-radius: 6px; font-size: 15px; white-space: nowrap; pointer-events: none; min-width: 220px; text-align: left;">
                        Booking unavailable: Puregold OPMCON booking ongoing</span>
            </div>

            <!-- Puregold OPMCON 2025 Event Card (Booking Disabled) -->
                    <div class="event-card" style="position: relative; padding-bottom: 60px;">
            <div class="event-img-container">
                <img src="img/499931834_663679763240613_434525793981383230_n.jpg" alt="Puregold OPMCON 2025" class="event-img">
            </div>
            <h3>Concert: Puregold OPMCON 2025</h3>
            <p>Date: July 07, 2025</p>
            <p>Celebrate the best of Original Filipino Music at Puregold OPMCON 2025! Join top OPM artists for a night of unforgettable performances at the Philippine Arena. Experience the vibrant music scene of the Philippines in one epic event!</p>
            <button class="event-btn" style="position: absolute; left: 20px; bottom: 20px;">Book Now</button>
            </div>

            <!-- BLACKPINK Event Card (Booking Disabled) -->
            <div class="event-card" style="position: relative; padding-bottom: 60px;">
                <div class="event-img-container">
                    <img src="img/500229890_1135987318574466_5159926729709100826_n.jpg" alt="BLACKPINK" class="event-img">
                </div>
                <h3>Concert: BLACKPINK</h3>
                <p>Date: November 22, 2025 - November 23, 2025</p>
                <p>Experience the electrifying return of BLACKPINK as they bring their Deadline World Tour to the Philippine Arena in Bulacan on November 22 and 23, 2025. Join Jisoo, Jennie, Rosé, and Lisa for the ultimate K-pop concert experience!</p>
                <div style="position: absolute; left: 20px; bottom: 20px;">
                    <button class="event-btn" style="background: #ccc; color: #888; cursor: not-allowed;" disabled>Book Now</button>
                    <span class="booking-unavailable-label" style="display: none; position: absolute; top: 50%; left: 105%;
                     transform: translateY(-50%); background: rgba(59,106,226,0.95); color: #fff; padding: 6px 16px;
                      border-radius: 6px; font-size: 15px; white-space: nowrap; pointer-events: none; z-index: 2; min-width: 220px; 
                      text-align: left;">Booking unavailable: Puregold OPMCON booking ongoing</span>
                </div>
            </div>

            <!-- CFO International Event Card (Booking Disabled) -->
            <div class="event-card" style="position: relative; padding-bottom: 60px;">
                <div class="event-img-container">
                    <img src="img/306571735_454680013358886_8428414132540948098_n.jpg" alt="Artist C" class="event-img">
                </div>
                <h3>Event: CFO International</h3>
                <p>Date: TBA</p>
                <p>Join the vibrant celebration of faith, family, and Filipino heritage at CFO LIVE 2025—a dynamic event hosted by the Iglesia Ni Cristo. Set in the iconic Philippine Arena in Bulacan, this event unites communities and families worldwide.</p>
                <div style="position: absolute; left: 20px; bottom: 20px;">
                    <button class="event-btn" style="background: #ccc; color: #888; cursor: not-allowed;" disabled>Book Now</button>
                    <span class="booking-unavailable-label" style="display: none; position: absolute; top: 50%; left: 105%; transform: translateY(-50%); background: rgba(59,106,226,0.95); color: #fff; padding: 6px 16px; border-radius: 6px; font-size: 15px; white-space: nowrap; pointer-events: none; z-index: 2; min-width: 220px; text-align: left;">Booking unavailable: SB19 booking ongoing</span>
                </div>
            </div>
        </div>
        <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Trailer label hover for SB19
            document.querySelectorAll('.event-img').forEach(function(img) {
                const label = img.parentElement.querySelector('.trailer-label');
                if (label) {
                    img.parentElement.addEventListener('mouseenter', function() {
                        label.style.display = 'block';
                    });
                    img.parentElement.addEventListener('mouseleave', function() {
                        label.style.display = 'none';
                    });
                }
            });
            // Booking unavailable label hover for all disabled buttons
            document.querySelectorAll('.event-card').forEach(function(card) {
                const btn = card.querySelector('button[disabled]');
                const label = card.querySelector('.booking-unavailable-label');
                if (btn && label) {
                    btn.parentElement.addEventListener('mouseenter', function() {
                        label.style.display = 'block';
                    });
                    btn.parentElement.addEventListener('mouseleave', function() {
                        label.style.display = 'none';
                    });
                }
            });
        });
        </script>
    </section>

    <!-- Seating Prices -->
    <section id="seating" class="seating">
        <h2>Seating Prices</h2>
        <table border="1" cellpadding="10" style="width:100%;">
            <tr>
                <th style="width:20%;">Section</th>
                <th style="width:30%;">Description</th>
                <th style="width:20%;">Price</th>
                <th style="width:30%;">Perks</th>
            </tr>
            <tr>
                <td>VIP Premium</td>
                <td>Front-row seats with the best view</td>
                <td>₱10,000 - ₱15,000</td>
                <td>Exclusive lounge access, free drinks, VIP parking</td>
            </tr>
            <tr>
                <td>Lower Box</td>
                <td>Great viewing angle close to the stage</td>
                <td>₱5,000 - ₱8,000</td>
                <td>Comfortable seating, good view</td>
            </tr>
            <tr>
                <td>Upper Box</td>
                <td>Elevated seating with good viewing angle</td>
                <td>₱3,000 - ₱4,500</td>
                <td>Clear view of stage</td>
            </tr>
            <tr>
                <td>General Admission</td>
                <td>Standard seating</td>
                <td>₱1,500 - ₱2,500</td>
                <td>Basic amenities</td>
            </tr>
            <tr>
                <td>Group Package</td>
                <td>Reserved section for groups of 10+</td>
                <td>₱1,200 per person</td>
                <td>Group discount, dedicated usher</td>
            </tr>
        </table>
    </section>

        <!-- About Philippine Arena -->
    <section id="about" class="about" style="display: flex; align-items: center; justify-content: center; min-height: 350px;">
        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
            <h2 style="text-align: center; font-size: 2rem; font-weight: 800; color: #3b3b3b;">About Philippine Arena</h2>
            <p style="max-width: 400px; margin: 0; text-align: left; font-size: 1.1rem;">
                The Philippine Arena is a multipurpose indoor arena with a maximum seating capacity of 55,000. Located in Ciudad de Victoria, a 140-hectare tourism enterprise zone in Bocaue and Santa Maria, Bulacan, the arena is the world's largest indoor arena and was completed in time for the Iglesia ni Cristo's centennial celebration on July 27, 2014. The arena features a retractable seating system designed by Gala Systems Inc. which allows the venue to be configured for various events and provides excellent sightlines from all seats.
            </p>
        </div>
        <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
            <div style="width: 450px; height: 370px; background: #e9e9e9; border-radius: 16px; display: flex; align-items: center; justify-content: center;">
                <img src="img/Philippine-Arena_00_Chris-Sparrow.jpg" alt="Philippine Arena" style="max-width: 100%; max-height: 100%; border-radius: 16px;">
            </div>
        </div>
    </section>

    <!-- Contact Us -->
    <section id="contact" class="contact" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 400px;">
        <h2 style="text-align: center; font-size: 2rem; font-weight: 800; color: #3b3b3b; margin-bottom: 18px;">Contact Us</h2>
        <form id="contactForm" style="background: #fff; padding: 32px 28px; border-radius: 18px; box-shadow: 0 2px 8px rgba(80,90,140,0.06); max-width: 420px; width: 100%; display: flex; flex-direction: column;">
            <div>
                <label for="contactName" style="font-weight: 600;">Name</label>
                <input type="text" id="contactName" name="contactName" placeholder="Your Name" required>
            </div>
            <div>
                <label for="contactEmail" style="font-weight: 600;">Email</label>
                <input type="email" id="contactEmail" name="contactEmail" placeholder="Your Email" required>
            </div>
            <div>
                <label for="contactPhone" style="font-weight: 600;">Phone No.</label>
                <div style="display: flex; align-items: center;">
                    <select id="countryCode" name="countryCode" style="width: 110px; margin-right: 8px; padding-left: 8px;">
                        <option value="+63" data-flag="🇵🇭">🇵🇭 +63</option>
                        <option value="+1" data-flag="🇺🇸">🇺🇸 +1</option>
                        <option value="+44" data-flag="🇬🇧">🇬🇧 +44</option>
                        <option value="+61" data-flag="🇦🇺">🇦🇺 +61</option>
                        <option value="+81" data-flag="🇯🇵">🇯🇵 +81</option>
                        <option value="+65" data-flag="🇸🇬">🇸🇬 +65</option>
                        <option value="+91" data-flag="🇮🇳">🇮🇳 +91</option>
                        <option value="+86" data-flag="🇨🇳">🇨🇳 +86</option>
                        <option value="+82" data-flag="🇰🇷">🇰🇷 +82</option>
                    </select>
                    <input type="tel" id="contactPhone" name="contactPhone" placeholder="Phone Number" required style="flex: 1;">
                </div>
            </div>
            <div>
                <label for="inquiryType" style="font-weight: 600;">Inquiry Type</label>
                <select id="inquiryType" name="inquiryType" required>
                    <option value="">Select Inquiry Type</option>
                    <option value="Event Booking">Event Booking</option>
                    <option value="Group Reservation">Group Reservation</option>
                    <option value="Corporate Events">Corporate Events</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div>
                <label for="contactMessage" style="font-weight: 600;">Message</label>
                <textarea id="contactMessage" name="contactMessage" placeholder="Your Message" rows="7" required style="resize: vertical;"></textarea>
            </div>
            <button type="submit" style="align-self: center; margin-top: 10px;">Send Message</button>
        </form>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>Philippine Arena, Bulacan, Philippines</p>
        <p>Contact: +63 123 456 7890 | Email: info@philippinearena.com</p>
        <p>
            <a href="#dashboard">Dashboard</a> |
            <a href="#upcoming-events">Events</a> |
            <a href="#seating">Seating</a> |
            <a href="#gallery">Gallery</a> |
            <a href="#about">About</a> |
            <a href="#contact">Contact</a>
        </p>
        <p>Follow us on:
            <a href="#">Facebook</a> |
            <a href="#">Twitter</a> |
            <a href="#">Instagram</a>
        </p>
    </footer>
        <!-- Booking Modal -->
    <div id="bookingModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book Tickets</h2>
                <button id="closeModal" class="modal-close">&times;</button>
            </div>
            <div class="modal-step-indicators">
                <div id="step1Circle" class="modal-step-circle active">1</div>
                <div id="step2Circle" class="modal-step-circle">2</div>
                <div id="step3Circle" class="modal-step-circle">3</div>
            </div>
            <form id="bookingForm">
                <!-- Step 1 -->
                <div id="step1">
                    <label for="eventName">Event:</label>
                    <input type="text" id="eventName" name="eventName" readonly>
                    <label for="eventDate">Date:</label>
                    <input type="text" id="eventDate" name="eventDate" readonly>
                    <label for="seatingType">Seating Type:</label>
                    <select id="seatingType" name="seatingType" required>
                        <option value="">Select Seating Type</option>
                        <option value="VIP Premium">VIP Premium</option>
                        <option value="Lower Box">Lower Box</option>
                        <option value="Upper Box">Upper Box</option>
                        <option value="General Admission">General Admission</option>
                    </select>
                    <label for="ticketAmount">Number of Tickets:</label>
                    <input type="number" id="ticketAmount" name="ticketAmount" min="1" required>
                    <label for="specialRequirements">Special Requirements:</label>
                    <textarea id="specialRequirements" name="specialRequirements" rows="3"></textarea>
                    <button type="button" id="nextStep" class="modal-btn">Next</button>
                </div>
                <!-- Step 2 -->
                <div id="step2" style="display: none;">
                    <div class="modal-form-row">
                        <div class="modal-form-col">
                            <label for="fullName" class="modal-form-label">Full Name:</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                        <div class="modal-form-col">
                            <label for="email" class="modal-form-label">Email:</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    <div class="modal-form-row">
                        <div class="modal-form-col">
                            <label for="phoneNo" class="modal-form-label">Phone No.:</label>
                            <input type="tel" id="phoneNo" name="phoneNo" required>
                        </div>
                        <div class="modal-form-col">
                            <label for="paymentMethod" class="modal-form-label">Payment Method:</label>
                            <select id="paymentMethod" name="paymentMethod" required>
                                <option value="">Select Payment Method</option>
                                <option value="Credit Card">Credit Card</option>
                                <option value="Debit Card">Debit Card</option>
                                <option value="GCash">GCash</option>
                                <option value="PayMaya">PayMaya</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="idImage" class="modal-form-label">ID Image:</label>
                        <input type="file" id="idImage" name="idImage" accept="image/*" required>
                        <div id="imagePreviewContainer" class="modal-image-preview-container">
                            <img id="imagePreview" alt="Uploaded ID Preview" class="modal-image-preview">
                        </div>
                    </div>
                    <button type="button" id="prevStep" class="modal-btn-back">Back</button>
                    <button type="button" id="nextStep2" class="modal-btn">Next</button>
                </div>
                <!-- Step 3 -->
                <div id="step3" style="display: none;">
                    <h3>Review Your Booking</h3>
                    <p><strong>Event:</strong> <span id="reviewEventName"></span></p>
                    <p><strong>Date:</strong> <span id="reviewEventDate"></span></p>
                    <p><strong>Seating Type:</strong> <span id="reviewSeatingType"></span></p>
                    <p><strong>Number of Tickets:</strong> <span id="reviewTicketAmount"></span></p>
                    <p><strong>Full Name:</strong> <span id="reviewFullName"></span></p>
                    <p><strong>Email:</strong> <span id="reviewEmail"></span></p>
                    <p><strong>Phone No.:</strong> <span id="reviewPhoneNo"></span></p>
                    <p><strong>Payment Method:</strong> <span id="reviewPaymentMethod"></span></p>
                    <p><strong>Total Cost:</strong> <span id="reviewTotalCost"></span></p>
                    <button type="button" id="prevStep3" class="modal-btn-back">Back</button>
                    <button type="button" id="confirmBooking" class="modal-btn">Confirm Booking</button>
                </div>
            </form>
        </div>
    </div>

  

        <script>
    document.addEventListener('DOMContentLoaded', function () {
        // CONTACT FORM
   const contactForm = document.getElementById('contactForm');
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault(); // Prevents the form from reloading the page

            // Gather form data
            const contactData = {
                name: document.getElementById('contactName').value,
                email: document.getElementById('contactEmail').value,
                phone: document.getElementById('contactPhone').value,
                countryCode: document.getElementById('countryCode').value,
                inquiryType: document.getElementById('inquiryType').value,
                message: document.getElementById('contactMessage').value
            };

            // POST to backend
            fetch('http://localhost:5000/api/contacts', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(contactData)
            })
            .then(res => res.json())
            .then(resp => {
                alert(resp.message || 'Thank you for contacting us!');
                contactForm.reset();
            })
            .catch((err) => {
                alert('Failed to send message: ' + err.message);
            });
        });
    }


        // BOOKING MODAL LOGIC
        // BOOKING MODAL LOGIC
const bookingModal = document.getElementById('bookingModal');
if (bookingModal) {
    document.querySelectorAll('.upcoming-events .event-btn:not([disabled])').forEach(button => {
        button.addEventListener('click', function () {
            const eventCard = this.closest('.event-card');
            const eventName = eventCard?.querySelector('h3')?.innerText || '';
            const eventDate = eventCard?.querySelector('p:nth-of-type(1)')?.innerText.replace('Date: ', '') || '';
            const eventNameInput = document.getElementById('eventName');
            const eventDateInput = document.getElementById('eventDate');
            if (eventNameInput) eventNameInput.value = eventName;
            if (eventDateInput) eventDateInput.value = eventDate;
            bookingModal.style.display = 'flex';
        });
    });
    const closeModalBtn = document.getElementById('closeModal');
    if (closeModalBtn) closeModalBtn.addEventListener('click', function () { bookingModal.style.display = 'none'; });

    // Modal Steps logic
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const step1Circle = document.getElementById('step1Circle');
    const step2Circle = document.getElementById('step2Circle');
    const step3Circle = document.getElementById('step3Circle');

    // Step 1 -> Step 2
    const nextStepBtn = document.getElementById('nextStep');
    if (nextStepBtn) {
        nextStepBtn.addEventListener('click', function () {
            const seatingType = document.getElementById('seatingType')?.value || '';
            const ticketAmount = document.getElementById('ticketAmount')?.value || '';
            if (!seatingType || !ticketAmount) {
                alert('Please select a seating type and specify the number of tickets.');
                return;
            }
            step1Circle.classList.remove('active');
            step2Circle.classList.add('active');
            step1.style.display = 'none';
            step2.style.display = 'block';
        });
    }
    // Step 2 -> Step 1 (Back)
    const prevStepBtn = document.getElementById('prevStep');
    if (prevStepBtn) {
        prevStepBtn.addEventListener('click', function () {
            step2Circle.classList.remove('active');
            step1Circle.classList.add('active');
            step2.style.display = 'none';
            step1.style.display = 'block';
        });
    }
    // Calculate/display total cost
    function calculateTotalCost() {
        const seatingType = document.getElementById('seatingType')?.value || '';
        const ticketAmount = parseInt(document.getElementById('ticketAmount')?.value) || 0;
        let pricePerTicket = 0;
        switch (seatingType) {
            case 'VIP Premium': pricePerTicket = 5000; break;
            case 'Lower Box': pricePerTicket = 3000; break;
            case 'Upper Box': pricePerTicket = 1500; break;
            case 'General Admission': pricePerTicket = 500; break;
            default: pricePerTicket = 0;
        }
        const totalCost = pricePerTicket * ticketAmount;
        let totalCostDisplay = document.getElementById('totalCostDisplay');
        if (!totalCostDisplay && step1) {
            totalCostDisplay = document.createElement('p');
            totalCostDisplay.id = 'totalCostDisplay';
            totalCostDisplay.style.marginTop = '10px';
            totalCostDisplay.style.fontWeight = 'bold';
            totalCostDisplay.style.color = '#3b6ae2';
            step1.appendChild(totalCostDisplay);
        }
        if (totalCostDisplay) totalCostDisplay.innerText = `Total Cost: ₱${totalCost.toLocaleString()}`;
    }
    const ticketAmountInput = document.getElementById('ticketAmount');
    if (ticketAmountInput) ticketAmountInput.addEventListener('input', calculateTotalCost);
    const seatingTypeInput = document.getElementById('seatingType');
    if (seatingTypeInput) seatingTypeInput.addEventListener('change', calculateTotalCost);

    // Step 2 -> Step 3
    const nextStep2Btn = document.getElementById('nextStep2');
    if (nextStep2Btn) {
        nextStep2Btn.addEventListener('click', function () {
            const fullName = document.getElementById('fullName')?.value || '';
            const email = document.getElementById('email')?.value || '';
            const phone = document.getElementById('phoneNo')?.value || '';
            const paymentMethod = document.getElementById('paymentMethod')?.value || '';
            const idImage = document.getElementById('idImage')?.files[0];
            if (!fullName || !email || !phone || !paymentMethod || !idImage) {
                alert('Please fill out all fields and upload a valid ID image.');
                return;
            }
            document.getElementById('reviewEventName').innerText = document.getElementById('eventName')?.value || '';
            document.getElementById('reviewEventDate').innerText = document.getElementById('eventDate')?.value || '';
            document.getElementById('reviewSeatingType').innerText = document.getElementById('seatingType')?.value || '';
            document.getElementById('reviewTicketAmount').innerText = document.getElementById('ticketAmount')?.value || '';
            document.getElementById('reviewFullName').innerText = fullName;
            document.getElementById('reviewEmail').innerText = email;
            document.getElementById('reviewPhoneNo').innerText = phone;
            document.getElementById('reviewPaymentMethod').innerText = paymentMethod;
            const seatingType = document.getElementById('seatingType')?.value || '';
            const ticketAmount = parseInt(document.getElementById('ticketAmount')?.value) || 0;
            let pricePerTicket = 0;
            switch (seatingType) {
                case 'VIP Premium': pricePerTicket = 5000; break;
                case 'Lower Box': pricePerTicket = 3000; break;
                case 'Upper Box': pricePerTicket = 1500; break;
                case 'General Admission': pricePerTicket = 500; break;
                default: pricePerTicket = 0;
            }
            const totalCost = pricePerTicket * ticketAmount;
            document.getElementById('reviewTotalCost').innerText = `₱${totalCost.toLocaleString()}`;
            step2Circle.classList.remove('active');
            step3Circle.classList.add('active');
            step2.style.display = 'none';
            step3.style.display = 'block';
        });
    }
    // Step 3 -> Step 2 (Back)
    const prevStep3Btn = document.getElementById('prevStep3');
    if (prevStep3Btn) {
        prevStep3Btn.addEventListener('click', function () {
            step3Circle.classList.remove('active');
            step2Circle.classList.add('active');
            step3.style.display = 'none';
            step2.style.display = 'block';
        });
    }
    // Image Preview for ID Image
    const idImageInput = document.getElementById('idImage');
    if (idImageInput) {
        idImageInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            const previewContainer = document.getElementById('imagePreviewContainer');
            const previewImage = document.getElementById('imagePreview');
            if (file && previewContainer && previewImage) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    previewImage.src = e.target.result;
                    previewContainer.style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else if (previewContainer && previewImage) {
                previewImage.src = '';
                previewContainer.style.display = 'none';
            }
        });
    }
    // Confirm Booking (Send to backend)
    const confirmBookingBtn = document.getElementById('confirmBooking');
    if (confirmBookingBtn) {
        confirmBookingBtn.addEventListener('click', function () {
            const bookingData = {
                eventName: document.getElementById('eventName')?.value || '',
                eventDate: document.getElementById('eventDate')?.value || '',
                seatingType: document.getElementById('seatingType')?.value || '',
                ticketAmount: document.getElementById('ticketAmount')?.value || '',
                specialRequirements: document.getElementById('specialRequirements')?.value || '',
                fullName: document.getElementById('fullName')?.value || '',
                email: document.getElementById('email')?.value || '',
                phone: document.getElementById('phoneNo')?.value || '',
                paymentMethod: document.getElementById('paymentMethod')?.value || ''
            };
            const idImageFile = document.getElementById('idImage')?.files[0];
            const formData = new FormData();
            Object.entries(bookingData).forEach(([key, val]) => formData.append(key, val));
            if (idImageFile) formData.append('idImage', idImageFile);

            // !! MAIN FIX: use full backend URL if frontend and backend run on different ports !!
            fetch('http://localhost:5000/api/bookings', {
                method: 'POST',
                body: formData
            })
            .then(res => {
                if (!res.ok) throw new Error('Network response was not ok');
                return res.json();
            })
            .then(resp => {
                alert(resp.message || 'Booking successful! Please check your email for confirmation and further details.');
                const bookingForm = document.getElementById('bookingForm');
                if (bookingForm) bookingForm.reset();
                const previewContainer = document.getElementById('imagePreviewContainer');
                const previewImage = document.getElementById('imagePreview');
                if (previewImage && previewContainer) {
                    previewImage.src = '';
                    previewContainer.style.display = 'none';
                }
                step1Circle.classList.add('active');
                step2Circle.classList.remove('active');
                step3Circle.classList.remove('active');
                step1.style.display = 'block';
                step2.style.display = 'none';
                step3.style.display = 'none';
                bookingModal.style.display = 'none';
                const totalCostDisplay = document.getElementById('totalCostDisplay');
                if (totalCostDisplay) totalCostDisplay.innerText = '';
            })
            .catch((err) => {
                alert('Booking failed. Please try again.\n' + (err.message || ''));
            });
        });
    }
}

        // Other UI scripts (nav highlight, smooth scroll, etc.) can remain the same,
        // but wrap DOM element access and listeners in similar null checks if you edit them.
    });
    </script>
    
        <script>
    document.addEventListener('DOMContentLoaded', function () {
        // Floating nav highlight logic
        function highlightNav() {
            const sections = [
                {id: 'dashboard'},
                {id: 'upcoming-events'},
                {id: 'seating'},
                {id: 'gallery'},
                {id: 'about'},
                {id: 'contact'}
            ];
            let scrollPos = window.scrollY + 100;
            let current = sections[0].id;
            for (let i = 0; i < sections.length; i++) {
                const el = document.getElementById(sections[i].id);
                if (el && el.offsetTop <= scrollPos) {
                    current = sections[i].id;
                }
            }
            document.querySelectorAll('.nav-anchor').forEach(a => {
                if (a.dataset.anchor === current) {
                    a.classList.add('active');
                } else {
                    a.classList.remove('active');
                }
            });
        }
        window.addEventListener('scroll', highlightNav);
        highlightNav();

        // Smooth scroll for nav links
        document.querySelectorAll('.nav-anchor').forEach(link => {
            link.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href').replace('#','');
                const target = document.getElementById(targetId);
                if (target) {
                    e.preventDefault();
                    window.scrollTo({
                        top: target.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Dashboard image curtain animation
        const dashboardImages = [
            'img/gd.png',
            'img/bini.png',
            'img/bp.png'
        ];
        let dashboardIndex = 0;
        const dashboardSection = document.getElementById('dashboard');
        if (dashboardSection) {
            dashboardSection.style.position = 'relative';
            dashboardSection.style.overflow = 'hidden';

            // Create left and right curtain divs
            const curtainLeft = document.createElement('div');
            const curtainRight = document.createElement('div');
            [curtainLeft, curtainRight].forEach(curtain => {
                curtain.style.position = 'absolute';
                curtain.style.top = 0;
                curtain.style.width = '50%';
                curtain.style.height = '100%';
                curtain.style.background = 'black';
                curtain.style.zIndex = 3;
                curtain.style.transition = 'transform 0.7s cubic-bezier(.77,0,.18,1)';
                curtain.style.pointerEvents = 'none';
            });
            curtainLeft.style.left = 0;
            curtainLeft.style.transform = 'translateX(0)';
            curtainRight.style.right = 0;
            curtainRight.style.transform = 'translateX(0)';

            dashboardSection.appendChild(curtainLeft);
            dashboardSection.appendChild(curtainRight);

            dashboardSection.style.backgroundImage = `url('${dashboardImages[dashboardIndex]}')`;

            function openCurtains() {
                curtainLeft.style.transform = 'translateX(-100%)';
                curtainRight.style.transform = 'translateX(100%)';
            }

            function closeCurtains() {
                curtainLeft.style.transform = 'translateX(0)';
                curtainRight.style.transform = 'translateX(0)';
            }

            function nextImage() {
                closeCurtains();
                setTimeout(() => {
                    dashboardIndex = (dashboardIndex + 1) % dashboardImages.length;
                    dashboardSection.style.backgroundImage = `url('${dashboardImages[dashboardIndex]}')`;
                    openCurtains();
                    setTimeout(nextImage, 2500);
                }, 700);
            }
            openCurtains();
            setTimeout(nextImage, 2500);
        }

    
    });
    </script>
    <script src="hamburger.js"></script>
</body>
</html>
</body>
</html>